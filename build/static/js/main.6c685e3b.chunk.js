(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){},131:function(e,t){},134:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(58),o=a.n(r);a(73),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(74);var l=a(33),c=a(11),i=(a(75),a(76),function(){return s.a.createElement("h1",null,"Chat Application - CodeOasis ")}),m=a(21),u=a(22),h=a(25),d=a(23),p=a(6),g=a(26),C=(a(77),a(135)),E=a(136),f=a(61),k=a(138),b=a(139),v=a(59),y=a.n(v),O=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(d.a)(t).call(this))).state={username:"",token:""},e.handleClick=e.handleClick.bind(Object(p.a)(e)),e.handleChange=e.handleChange.bind(Object(p.a)(e)),e}return Object(g.a)(t,e),Object(u.a)(t,[{key:"handleClick",value:function(){var e=this;y.a.post("/users",{username:this.state.username}).then(function(t){return e.setState({token:t.data.Token,username:t.data.username},e.setDatainLocalStorage(t))}).catch(function(e){return console.log(e)})}},{key:"setDatainLocalStorage",value:function(e){if(e.data.Token){var t={username:this.state.username};localStorage.setItem("userdetails",JSON.stringify(t))}}},{key:"handleChange",value:function(e){this.setState({username:e.target.value})}},{key:"render",value:function(){return s.a.createElement(C.a,null,s.a.createElement(E.a,null,s.a.createElement("h5",null,this.state.token),s.a.createElement(f.a,null,s.a.createElement(k.a,{method:"POST",action:"http://localhost:8080/user",className:"LoginForm"},s.a.createElement(k.a.Group,{as:E.a,controlId:"formPlaintextEmail"},s.a.createElement(k.a.Label,{column:!0,sm:"2"}),s.a.createElement(f.a,{sm:"10"},s.a.createElement(k.a.Control,{onChange:this.handleChange,name:"username",type:"text",placeholder:"User"}))),s.a.createElement(k.a.Group,{as:E.a,controlId:"formPlaintextPassword"},s.a.createElement(k.a.Label,{column:!0,sm:"2"}),s.a.createElement(f.a,{sm:"10"},s.a.createElement(k.a.Control,{type:"password",placeholder:"Password",readOnly:!0,defaultValue:"123456"}))),s.a.createElement(b.a,{onClick:this.handleClick,variant:"dark"},"Login"),this.state.token?s.a.createElement(c.a,{to:{pathname:"/Chat",state:{username:this.state.username}}}):null))))}}]),t}(n.Component);var j=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(i,null),s.a.createElement(O,null))},w=a(35),S=(a(104),a(137)),W=a(63),I=a(66),M=a.n(I),T=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={username:e.location.state.username,mySocketID:"",messageFromInput:"",endpoint:"http://localhost:8080/",messages:[],placeholder:"Write message here..",ConnectedUsers:[],openChat:!1,CurrentUserToChatWIth:""},a.joinChat=a.joinChat.bind(Object(p.a)(a)),a.sendMessage=a.sendMessage.bind(Object(p.a)(a)),a.handleMessage=a.handleMessage.bind(Object(p.a)(a)),a.openChatWith=a.openChatWith.bind(Object(p.a)(a)),a.scrollToBottom=a.scrollToBottom.bind(Object(p.a)(a)),a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket=M()(),this.joinChat(),this.socket.on("message",function(t){t.user!==e.state.CurrentUserToChatWIth.username||""===e.state.CurrentUserToChatWIth.username?alert(t.user+" want to talk with you.."):e.setState({messages:[].concat(Object(w.a)(e.state.messages),[t])})}),this.socket.on("connections",function(t){e.setState({ConnectedUsers:t})})}},{key:"joinChat",value:function(){this.socket.emit("join",{user:this.state.username})}},{key:"scrollToBottom",value:function(){this.messagesEnd.scrollTop=this.messagesEnd.scrollHeight}},{key:"sendMessage",value:function(){var e=this;if(""!==this.state.messageFromInput){this.socket.emit("message",{chatWith:this.state.CurrentUserToChatWIth,chatWithName:this.state.username,message:this.state.messageFromInput});var t={user:this.state.username,message:this.state.messageFromInput};this.setState({messages:[].concat(Object(w.a)(this.state.messages),[t])}),this.scrollToBottom(),this.setState({messageFromInput:""}),this.inputMessage.value=""}else this.setState({placeholder:"Cannot send empty message !"}),setTimeout(function(){e.setState({placeholder:"Write message here.."})},2e3)}},{key:"openChatWith",value:function(e){this.setState({messages:[]}),e.username===this.state.username?alert("You cannot talk with yourself..."):(this.setState({CurrentUserToChatWIth:e}),this.socket.emit("openChatWith",{chatWith:e.socketid,me:this.state.username}),this.setState({openChat:!0}))}},{key:"handleMessage",value:function(e){this.setState({messageFromInput:e.target.value})}},{key:"render",value:function(){var e=this,t={background:"#333333e1",color:"white"},a=this.state.messages.map(function(t,a){return s.a.createElement("li",{className:"allMessages",key:a},s.a.createElement("b",null,e.state.username===t.user?s.a.createElement("h3",{className:"MeinChat"},"Me"):t.user,":"),t.message,s.a.createElement("hr",null))}),n=this.state.ConnectedUsers.map(function(a,n){return s.a.createElement("h5",{style:e.state.CurrentUserToChatWIth.username===a.username?t:{},className:"allConnectedUsers",key:n},s.a.createElement("b",{onClick:function(){return e.openChatWith(a)}},e.state.username===a.username?"Me":a.username))});return s.a.createElement("div",null,s.a.createElement("h2",{className:"ChatHeader"},"Chat"),s.a.createElement(C.a,null,s.a.createElement(E.a,null,s.a.createElement(f.a,{sm:8,className:"MainChat"},s.a.createElement("h3",{className:"wellcomeUserStyle"},"Wellcome..",s.a.createElement("b",null,this.state.username)),s.a.createElement("hr",null),s.a.createElement("div",{ref:function(t){e.messagesEnd=t},className:"ChatMessages"},a),this.state.openChat?s.a.createElement(S.a,{onChange:this.handleMessage,className:"mb-3"},s.a.createElement(W.a,{ref:function(t){return e.inputMessage=t},placeholder:this.state.placeholder,onKeyPress:function(t){"Enter"===t.key&&e.sendMessage()}}),s.a.createElement(S.a.Append,null)):null),s.a.createElement(f.a,{sm:4},s.a.createElement("h5",{className:"OnlineUsers"},"Online Users"),n))))}}]),t}(n.Component);o.a.render(s.a.createElement(function(){return s.a.createElement(l.a,null,s.a.createElement(c.d,null,s.a.createElement(c.b,{path:"/",component:j,exact:!0}),s.a.createElement(c.b,{path:"/Chat",component:T}),s.a.createElement(c.b,{path:"*",component:function(){return"not found"}})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},68:function(e,t,a){e.exports=a(134)},73:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.6c685e3b.chunk.js.map